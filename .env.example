# 단일 API 키 사용
GEMINI_API_KEY=your_gemini_api_key_here

# 다중 API 키 사용 (Multi-API 모드)
# 쉼표로 구분하여 여러 API 키를 입력할 수 있습니다
# Multi-API 모드를 사용하려면 --multi-api 옵션과 함께 실행하세요
# 예: python main.py --mode jokbo-centric --multi-api
GEMINI_API_KEYS=api_key_1,api_key_2,api_key_3

# 키당 동시 요청 수 (진정한 병렬 처리)
# 예: 5개의 키 × 2 동시 = 최대 10 동시 작업
# 워커 자원과 레이트리밋에 맞춰 조정하세요.
GEMINI_PER_KEY_CONCURRENCY=2

# PDF 분할 설정 (선택사항)
# 큰 PDF를 처리할 때 한 번에 보낼 최대 페이지 수 (기본값: 40)
MAX_PAGES_PER_CHUNK=30

# 안전 필터 해제 (기본: true)
# true로 설정하면 Google GenAI 안전 임계치(threshold)를 모두 BLOCK_NONE으로 설정하여
# 콘텐츠 차단을 비활성화하려고 시도합니다. 서비스 정책에 따라 일부 차단은 유지될 수 있습니다.
DISABLE_SAFETY_FILTERS=true

# 기본 모델 선택 (flash | pro)
# 미지정 시 기본값은 flash로 동작합니다.
GEMINI_MODEL=flash

# 파일 스토리지 TTL (초)
# 업로드된 파일이 Redis에서 유지되는 시간. 장시간 대기/처리를 고려해 24h 이상 권장.
# 기본값: 86400 (24시간)
FILE_TTL_SECONDS=86400


# 스토리지 및 정리 설정
# 영속 스토리지 경로 (/tmp 대신 사용). Render에서는 디스크 마운트 경로로 설정하세요 (예: /data/storage)
RENDER_STORAGE_PATH=

# 관리자 비밀번호 (임시파일/디버그/세션 정리 API 보호용)
# 설정되지 않으면 /admin/* 정리 엔드포인트는 비활성화됩니다.
ADMIN_PASSWORD=

# 관리자 구글 이메일 (쉼표로 구분)
# 여기에 지정된 이메일로 Google 로그인하면 관리자 권한을 부여합니다.
# 관리자는 프론트엔드에서 테스터 추가/삭제 및 토큰 관리가 가능합니다.
ADMIN_EMAILS=

# 보존 기간(시간)
# 디버그/로그 보존 (기본 168 = 7일)
DEBUG_RETENTION_HOURS=168
# 결과 PDF 보존 (기본 720 = 30일)
RESULT_RETENTION_HOURS=720
# 세션(temp) 보존 (스크립트 기준, 기본 168 = 7일)
SESSIONS_RETENTION_HOURS=168
# TMP 디렉토리 보존 (기본 24시간; 워커가 주기적으로 청소)
TMP_RETENTION_HOURS=24

# 워커 디스크 사용 제어
# 워커에서 결과 PDF를 디스크에도 저장할지 여부(기본 true). false 시 Redis(48h)만 사용
PERSIST_RESULTS_ON_DISK=true
# 워커가 주기적으로 디스크 정리를 수행할지 여부(기본 true)
ENABLE_WORKER_CLEANUP=true
# 워커 정리 주기(분, 기본 60)
WORKER_CLEANUP_INTERVAL_MINUTES=60

# --- API 안정성/타임아웃 (초) ---
# 업로드 RPC 하드 타임아웃 (기본 120)
GENAI_UPLOAD_TIMEOUT_SECS=120
# 업로드 후 ACTIVE 상태 대기 하드 타임아웃 (기본 300)
GENAI_UPLOAD_ACTIVATION_TIMEOUT_SECS=300
# 모델 generateContent 호출 하드 타임아웃 (기본 300)
GENAI_REQUEST_TIMEOUT_SECS=300

# 레이트리밋(HTTP 429) 발생 시 키 단기 쿨다운(초)
GEMINI_RATE_LIMIT_COOLDOWN_SECS=30


# --- CBT Auth & Tokens ---
# Google OAuth Client ID (from Google Cloud Console)
GOOGLE_OAUTH_CLIENT_ID=
# Comma-separated tester emails allowed during CBT (leave empty to allow any login)
ALLOWED_TESTERS=
# 프론트엔드에서 관리자가 동적으로 테스터를 추가/삭제할 수 있으며
# ALLOWED_TESTERS 환경변수와 합집합으로 로그인 허용 여부가 결정됩니다.
# Secret to sign session cookies (required)
AUTH_SECRET_KEY=change-me-to-a-long-random-string
# Session cookie lifetime (seconds)
SESSION_EXPIRES_SECONDS=604800
# Allow unverified Google tokens in dev (claims-only validation)
ALLOW_UNVERIFIED_GOOGLE_TOKENS=false
# Allow dev login endpoint guarded by ADMIN_PASSWORD
ALLOW_DEV_LOGIN=false
# Redis URL for token and job storage
REDIS_URL=redis://localhost:6379/0
# Initial token grant on first login
CBT_TOKENS_INITIAL=200
# Per-chunk token costs
FLASH_TOKENS_PER_CHUNK=1
PRO_TOKENS_PER_CHUNK=4
# Optional feedback form URL to display in UI
FEEDBACK_FORM_URL=
